<html>
<title>ME ESP8266 an MqTT Lite Instance - IoT Francesco Barone BASE v 1.0</title>
<head>
<link rel="stylesheet" type="text/css" href="css/admin.css">

<link rel="stylesheet" href="css/jqm.css" />
<script src="js/jq.js"></script>
<script src="js/jqm.js"></script>

</head>

<script>
	function bit_test(num, bit){
		return ((num>>bit) % 2 != 0)
		}

	function bit_set(num, bit){
		return num | 1<<bit;
		}

	$(document).ready(function() {
				
		$.get('data/parameters.val', function(data) {

			var rows = data.split("\n");
			console.log("start");
			for(var i=0;i<rows.length;i++){
				
				console.log(rows[i]);
				var values = rows[i].split(":");	
				
				console.log(values[0]);
				if(values.length>2 && values[0]!=""){
										
					console.log("Add to table "+values[1]);
					$("#PARAMETERS tbody").append("<tr class=\"parameters\"><td width=70%>"+values[1]+"</td><td width=30%><input type=text readonly value=\""+values[2]+"\"></td></tr>");		
					}
				}
				
			
			$("#PARAMETERS").table( "refresh" );   		
			//if(values.length>0)$("#SRVNAME").text( values[0] );
			//if(values.length>1)$("#SRVPORT").text( values[1] );
			});
				
		$("#refresh").click(function(e) {

			});
		
		$("#admin").click(function(e) {
			
			e.preventDefault();
			window.location ='/admin.htm';
			});
			
		$("#stats").click(function(e) {
			
			e.preventDefault();
			window.location ='/index.htm';
			});
			
		$("#users").click(function(e) {
			
			e.preventDefault();
			window.location ='/users.htm';
			});
			
		$("#params").click(function(e) {
			
			e.preventDefault();
			window.location ='/params.htm';
			});
			
		$("#adminuser").click(function(e) {
			
			e.preventDefault();
			$("#ADMIN_USER").submit();
			});
		});

</script>

<body>

<div id="main" data-role="page">
  <div data-role="header">
    <h1>ME - MqTT Server Instance</h1>
  </div>

  <div data-role="main" class="ui-content">

	<table id="config_div">
		<tr><td style="vertical-align: top;">

		<div id="title">Configuration</div>
		<hr>

		<div id="config-content">
						
			<table id="HEADER_PARAMETERS" cellspacing="0" cellpadding="0" style="width:100%;display: table">
			<tr>
			<th colspan=2>
			<label  class="inline">
				<p class="textclass">MqTT parameters</p>
			</label>
			</th>			
			</tr>			
			</table>
			
			<table id="PARAMETERS" class="parameters" cellspacing="0" cellpadding="0" style="padding: 5px;width:100%;display: table">
			<tr>
			<th colspan=2>
			</th>
			</tr>
			</table>
			
		</div>

		</td></tr>
	</table>

  </div>

  <div data-role="footer">
	<h1>
	<a href="#" id="admin"><img src="img/admin.png" alt="Admin"></a>
	<a href="#" id="stats"><img src="img/stats.png" alt="Stats"></a>
	<a href="#" id="users"><img src="img/users.png" alt="Users"></a>
	<a href="#" id="params"><img src="img/param.png" alt="Parameters"></a>
	</h1>
  </div>
</div>

</body>
</html>